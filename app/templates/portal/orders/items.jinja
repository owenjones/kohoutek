{% extends "portal/portal-frame.jinja" %}
{% block module %}
<div class="uk-section uk-section-default uk-section-small">
  <div class="uk-container uk-container-small">
    <div class="uk-flex uk-flex-stretch" uk-grid>
      <div class="uk-width-1-1 uk-text-center">
        <h1>New Badge Order</h1>
        {% include "portal/components/alerts.jinja" %}
      </div>

      <div class="uk-width-1-1">
        <div class="uk-card uk-card-default uk-card-body">
          <form method="post" action="{{ url_for('portal.processOrder') }}">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
            <p>Badges are £1 each. Postage within the UK is £2 for orders of 1-20 badges, £3.50 for larger orders. Postage to international teams will be higher, please choose the most suitable option for you on the next page.</p>
          {% for item in items %}
            <div class="uk-grid-small uk-flex uk-flex-middle uk-margin-medium" uk-grid>
              <div class="uk-visible@s uk-width-1-5">
                <img src="{{ item.image_url }}" class="uk-padding-small" />
              </div>
              <div class="uk-width-expand">
                <h4>{{ item.name }}</h4>
                <p>{{ item.description }}</p>
              </div>
              <div>
                {% if item.remaining > 0 or item.limited == False %}
                <input name="item[{{ item.id }}]" type="number" class="uk-input uk-input-large uk-form-width-small" placeholder="0"></input>
                {% if item.limited %}
                <div class="uk-text-meta uk-text-right uk-margin-small-top">{{ item.remaining }} remaining</div>
                {% endif %}
                {% else %}
                <div class="uk-text-warning">Out of stock</div>
                {% endif %}
              </div>
            </div>
          {% endfor %}
            <div class="uk-text-center">
              <button type="submit" class="uk-button uk-button-primary uk-button-large">Order Badges</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
